!function(e){function t(r){if(o[r])return o[r].exports;var s=o[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";core=function(){var e=o(1),t=o(4),r=o(5),s=o(7),n=o(8),i=o(9),c=o(11),a=o(12),p=o(13),l=o(15),d=function(o){this.events=new e,this.worker=new t,this.utils=new r,this.dom=new s,this.modules={preloader:new n,router:new i,snackbar:new c,templates:new a,progressbar:new p,reports:new l},this.debug=!0,this.bindEvents()};return d.prototype.bindEvents=function(){o(16)},d.prototype.loadCustomElements=function(e){console.log("Core :: loadCustomElements",e)},d.prototype.start=function(e){},d.prototype.destroy=function(e){this.events.publish("core:destroy:"+e)},d.prototype.build=function(e){},d.prototype.startAll=function(){console.log("core:startAll"),this.events.publish("core:dom:build:application")},d.prototype.destroyAll=function(){this.events.publish("core:destroy:all")},new d}()},function(e,t,o){var r=o(2),s=o(3),n=function(){return this instanceof n?void(this._channels=new r("")):new n};n.prototype.getChannel=function(e,t){var o=this._channels,r=e.split(":"),s=0,n=r.length;if(""===e)return o;if(r.length>0)for(n;n>s;s++){if(!o.hasChannel(r[s])){if(t)break;o.addChannel(r[s])}o=o.returnChannel(r[s])}return o},n.prototype.subscribe=function(e,t,o,r){var s=this.getChannel(e||"",!1);return o=o||{},r=r||{},s.addSubscriber(t,o,r)},n.prototype.once=function(e,t,o,r){return o=o||{},o.calls=1,this.subscribe(e,t,o,r)},n.prototype.getSubscriber=function(e,t){var o=this.getChannel(t||"",!0);return o.namespace!==t?null:o.getSubscriber(e)},n.prototype.remove=function(e,t){var o=this.getChannel(e||"",!0);return o.namespace!==e?!1:void o.removeSubscriber(t)},n.prototype.publish=function(e){var t=this.getChannel(e||"",!0);if(t.namespace!==e)return null;var o=Array.prototype.slice.call(arguments,1);o.push(t),t.publish(o)},n.prototype.on=n.prototype.subscribe,n.prototype.bind=n.prototype.subscribe,n.prototype.emit=n.prototype.publish,n.prototype.trigger=n.prototype.publish,n.prototype.off=n.prototype.remove,n.Channel=r,n.Subscriber=s,e.exports=n},function(e,t,o){var r=o(3),s=function(e,t){return this instanceof s?(this.namespace=e||"",this._subscribers=[],this._channels={},this._parent=t,void(this.stopped=!1)):new s(e)};s.prototype.addSubscriber=function(e,t,o){var s=new r(e,t,o);return t&&void 0!==t.priority?(t.priority=t.priority>>0,t.priority<0&&(t.priority=0),t.priority>=this._subscribers.length&&(t.priority=this._subscribers.length-1),this._subscribers.splice(t.priority,0,s)):this._subscribers.push(s),s.channel=this,s},s.prototype.stopPropagation=function(){this.stopped=!0},s.prototype.getSubscriber=function(e){var t=0,o=this._subscribers.length;for(o;o>t;t++)if(this._subscribers[t].id===e||this._subscribers[t].fn===e)return this._subscribers[t]},s.prototype.setPriority=function(e,t){var o,r,s,n,i=0,c=0;for(c=0,n=this._subscribers.length;n>c&&(this._subscribers[c].id!==e&&this._subscribers[c].fn!==e);c++)i++;o=this._subscribers[i],r=this._subscribers.slice(0,i),s=this._subscribers.slice(i+1),this._subscribers=r.concat(s),this._subscribers.splice(t,0,o)},s.prototype.addChannel=function(e){this._channels[e]=new s((this.namespace?this.namespace+":":"")+e,this)},s.prototype.hasChannel=function(e){return this._channels.hasOwnProperty(e)},s.prototype.returnChannel=function(e){return this._channels[e]},s.prototype.removeSubscriber=function(e){var t=this._subscribers.length-1;if(!e)return void(this._subscribers=[]);for(t;t>=0;t--)this._subscribers[t].fn!==e&&this._subscribers[t].id!==e||(this._subscribers[t].channel=null,this._subscribers.splice(t,1))},s.prototype.publish=function(e){var t,o,r,s=0,n=this._subscribers.length,i=!1;for(n;n>s;s++)i=!1,t=this._subscribers[s],this.stopped||(o=this._subscribers.length,void 0!==t.options&&"function"==typeof t.options.predicate?t.options.predicate.apply(t.context,e)&&(i=!0):i=!0),i&&(t.options&&void 0!==t.options.calls&&(t.options.calls--,t.options.calls<1&&this.removeSubscriber(t.id)),t.fn.apply(t.context,e),r=this._subscribers.length,n=r,r===o-1&&s--);this._parent&&this._parent.publish(e),this.stopped=!1},e.exports=s},function(e,t){"use strict";var o=function(e,t,r){return this instanceof o?(this.id=this.guidGenerator(),this.fn=e,this.options=t,this.context=r,void(this.channel=null)):new o(e,t,r)};o.prototype.guid=function(e){return(65536*(1+Math.random())|0).toString(16).substring(1)},o.prototype.guidGenerator=function(e){var t=this.guid;return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},o.prototype.update=function(e){e&&(this.fn=e.fn||this.fn,this.context=e.context||this.context,this.options=e.options||this.options,this.channel&&this.options&&void 0!==this.options.priority&&this.channel.setPriority(this.id,this.options.priority))},e.exports=o},function(e,t){var o=function(){return this.worker=new Worker("assets/js/core/worker/worker.js"),this.worker.onmessage=function(e){var t=e.data;for(var o in t)if(t.hasOwnProperty(o))switch(o){case"template:loaded":var r=Object.keys(t[o])[0],t=t[o][r];core.events.publish("core:template:loaded",{name:r,raw:t});break;case"reports:loaded":console.log("reports:loaded --> ",t[o]),core.events.publish("core:reports:loaded",t[o]);break;case"report:loaded":console.log("report:loaded --> ",t[o]),core.events.publish("core:report:loaded",{raw:t[o]});break;case"criterias:loaded":core.events.publish("core:criterias:loaded",t[o]);break;case"criteriaKeys:loaded":core.events.publish("core:criteriaKeys:loaded",t[o]);break;case"print-forms:loaded":core.events.publish("core:print-forms:loaded",t[o]);break;case"web-forms:loaded":core.events.publish("core:web-forms:loaded",t[o]);break;case"bps:loaded":core.events.publish("core:bps:loaded",t[o]);break;default:console.log("default")}},this.worker};e.exports=o},function(e,t,o){"use strict";var r=o(6),s=function(){this.element=[]};s.prototype.Base64=new r,s.prototype.merge=function(e,t){var o={};for(var r in e)e.hasOwnProperty(r)&&(o.hasOwnProperty(r)||(o[r]=e[r]));for(var r in t)t.hasOwnProperty(r)&&(o.hasOwnProperty(r)||(o[r]=t[r]));return o},s.prototype.request=function(e,t,o,r){var s=new XMLHttpRequest;s.open(e.toUpperCase(),t,!0),s.onload=function(){r(this.status>=200&&this.status<400?this.response:new Error(this.response))},s.onerror=function(){r(new Error(this.response))},s.send()},s.prototype.log=function(e,t){var t=t||"black",o="White";switch(t){case"success":t="Green",o="LimeGreen";break;case"info":t="DodgerBlue",o="Turquoise";break;case"error":t="Red",o="Black";break;case"start":t="OliveDrab",o="PaleGreen";break;case"warning":t="Tomato",o="Black";break;case"end":t="Orchid",o="MediumVioletRed";break;default:t=t}"object"==typeof e?console.log(e):"object"==typeof t?(console.log("%c"+e,"color: PowderBlue;font-weight:bold; background-color: RoyalBlue;"),console.log(t)):console.log("%c"+e,"color:"+t+";font-weight:bold; background-color: "+o+";")},s.prototype.get=function(e,t,o){this.request("get",e,t,o)},s.prototype.post=function(e,t,o){this.request("post",e,t,o)},s.prototype.put=function(e,t,o){this.request("put",e,t,o)},s.prototype["delete"]=function(e,t,o){this.request("delete",e,t,o)},s.prototype.start=function(){console.log("Utils: start")},s.prototype.stop=function(){console.log("Utils: stop")},s.prototype.destroy=function(){console.log("Utils: destroy"),this.element=[]},e.exports=s},function(e,t){var o=function(e){return this.b64tab={},this.b64tabPopulate(),this};o.prototype.b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o.prototype.b64tabPopulate=function(){for(var e=this.b64chars,t=0,o=e.length;o>t;t++)this.b64tab[e.charAt(t)]=t;return this},o.prototype.fromCharCode=String.fromCharCode,o.prototype.cb_utob=function(e){if(e.length<2){var t=e.charCodeAt(0);return 128>t?e:2048>t?this.fromCharCode(192|t>>>6)+this.fromCharCode(128|63&t):this.fromCharCode(224|t>>>12&15)+this.fromCharCode(128|t>>>6&63)+this.fromCharCode(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return this.fromCharCode(240|t>>>18&7)+this.fromCharCode(128|t>>>12&63)+this.fromCharCode(128|t>>>6&63)+this.fromCharCode(128|63&t)},o.prototype.re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,o.prototype.utob=function(e){return e.replace(this.re_utob,this.cb_utob.bind(this))},o.prototype.cb_encode=function(e){var t=this.b64chars,o=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),s=[t.charAt(r>>>18),t.charAt(r>>>12&63),o>=2?"=":t.charAt(r>>>6&63),o>=1?"=":t.charAt(63&r)];return s.join("")},o.prototype.btoa=function(e){return e.replace(/[\s\S]{1,3}/g,this.cb_encode.bind(this))},o.prototype._encode=function(e){return this.btoa(this.utob(e))},o.prototype.encodeURI=function(e){return this.encode(e,!0)},o.prototype.re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),o.prototype.cb_btou=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),o=t-65536;return this.fromCharCode((o>>>10)+55296)+this.fromCharCode((1023&o)+56320);case 3:return this.fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return this.fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},o.prototype.btou=function(e){return e.replace(this.re_btou,this.cb_btou.bind(this))},o.prototype.cb_decode=function(e){var t=e.length,o=t%4,r=(t>0?this.b64tab[e.charAt(0)]<<18:0)|(t>1?this.b64tab[e.charAt(1)]<<12:0)|(t>2?this.b64tab[e.charAt(2)]<<6:0)|(t>3?this.b64tab[e.charAt(3)]:0),s=[this.fromCharCode(r>>>16),this.fromCharCode(r>>>8&255),this.fromCharCode(255&r)];return s.length-=[0,0,2,1][o],s.join("")},o.prototype.atob=function(e){return e.replace(/[\s\S]{1,4}/g,this.cb_decode.bind(this))},o.prototype._decode=function(e){return this.btou(this.atob(e))},o.prototype.replacer=function(e){return console.log("replacer -> char:",e),"-"==e?"+":"/"},o.prototype.decode=function(e){var t=String(e).replace(/[-_]/g,this.replacer).replace(/[^A-Za-z0-9\+\/]/g,"");return this._decode(t)},o.prototype.encode=function(e,t){return t?this._encode(String(e)).replace(/[+\/]/g,this.replacer).replace(/=/g,""):this._encode(String(e))},e.exports=o},function(e,t){"use strict";var o=function(){this.root=document,this.application={},this.editor={},this.snackbar={},this.splashscreen={},this.bindEvents()};o.prototype.bindEvents=function(){var e=this;document.addEventListener("DOMContentLoaded",function(){core.events.subscribe("core:start:all",function(){console.log("core  > dom > bindEvents > core:start:all"),manager.start()},{priority:0}),core.events.subscribe("core:dom:updateApplication",function(t){e.root.body.appendChild(t)},{priority:0}),core.events.subscribe("core:dom:application:clear",function(){console.log(" clear ->",e.application)}),core.events.subscribe("core:dom:build:application",function(){console.log("Dom <- core:dom:build:application"),e.build()}),core.events.subscribe("core:dom:application:show",function(){console.log(" Dom <- core:dom:application:show"),core.dom.application.application.showCards()}),core.events.subscribe("core:dom:application:hide",function(){console.log(" Dom <- core:dom:application:hide"),core.dom.application.application.hideCards()}),core.events.subscribe("core:dom:editor:show",function(){console.log(" Dom <- core:dom:editor:show"),core.dom.editor.style.zIndex=1,core.dom.editor.classList.add("fadeIn"),core.dom.editor.classList.remove("fadeOut"),core.dom.editor.classList.remove("hide")}),core.events.subscribe("core:dom:editor:hide",function(){console.log(" Dom <- core:dom:editor:hide"),core.dom.editor.style.zIndex=0,core.dom.editor.classList.remove("fadeIn"),core.dom.editor.classList.add("fadeOut"),core.dom.editor.classList.add("hide")}),core.events.subscribe("core:dom:set:title",function(e){console.log(" Dom <- core:dom:set:title"),core.dom.application.application.setAttribute("caption",e)}),core.events.subscribe("core:dom:splashscreen:progress:set",function(e){console.log(" Dom <- core:dom:splashscreen:progress:set");try{core.dom.splashscreen.progress.setProgress(e)}catch(t){console.log(t)}})},!1)},o.prototype.build=function(){console.log("Dom :: build application");this.editor=document.querySelector("#editor"),this.splashscreen=document.querySelector("#splashscreen"),this.application=document.createElement("core-layout"),document.body.appendChild(this.application),setTimeout(core.events.publish("core:dom:build:ready"),100)},o.prototype.start=function(){console.log("Dom: start")},o.prototype.stop=function(){console.log("Dom: stop")},o.prototype.destroy=function(){console.log("Dom: destroy")},e.exports=o},function(e,t){"use strict";var o=function(){this.tasks={start:["router","snackbar"],load:["reports","criterias","criteriaKeys","bps","web-forms","print-forms"]},this.total=0,this.loaded=0,this.percent=0,this.element={},this.bindEvents()};o.prototype.bindEvents=function(){var e=this;document.addEventListener("DOMContentLoaded",function(){core.events.subscribe("core:preloader:start",function(){console.log("Preloader <-core:preloader:start"),e.start()}),core.events.subscribe("core:preloader:task:ready",function(){e.loaded++,e.percent=5*Math.round(e.loaded/e.total*100/5),core.events.publish("core:dom:splashscreen:progress:set",e.percent),parseInt(e.loaded,10)===parseInt(e.total,10)&&core.events.publish("core:preloader:finish")})})},o.prototype.start=function(){console.log("Preloader: start");for(var e in this.tasks)this.total+=this.tasks[e].length;for(var e in this.tasks)for(var t=this.tasks[e],o=t.length-1;o>=0;o--){var r=["core",t[o],e].join(":");console.log("Preloader ->",r),core.events.publish(r)}},o.prototype.stop=function(){console.log("Preloader: stop")},o.prototype.finish=function(){console.log("Preloader: finish")},o.prototype.destroy=function(){console.log("Preloader: destroy")},e.exports=o},function(e,t,o){"use strict";function r(){this.pathRoot="",this.routes=[],this.type="hash",this.path=null,this.hash=null,this.context=this,this.handler=window;var e="([\\w-]+)";this.namedParam={match:new RegExp("{("+e+")}","g"),replace:e},this.bindEvents()}var s=o(10);r.prototype.Route=s,r.prototype.add=function(e,t){return this.routes.push(new this.Route(e,t,this)),this},r.prototype.empty=function(){return this.routes=[],this},r.prototype.setType=function(e){return this.type=e,this},r.prototype.setPathRoot=function(e){return this.pathRoot=e,this},r.prototype.setPath=function(e){return this.path=e,this},r.prototype.setHash=function(e){return this.hash=e,this},r.prototype.setContext=function(e){return this.context=e,this},r.prototype.setHandler=function(e){return this.handler=e,this},r.prototype.getUrl=function(e){var t;if(e=e||this.type,"path"==e){var o=new RegExp("^"+this.pathRoot+"/?");t=this.path||window.location.pathname.substring(1),t=t.replace(o,"")}else"hash"==e&&(t=this.hash||window.location.hash.substring(1));return decodeURI(t)},r.prototype.match=function(e,t){var o=new this.Route(e,t,this);return o.test(this.getUrl())?o.run():void 0},r.prototype.run=function(){var e=this.getUrl(),t={};for(var o in this.routes)if(t=this.routes[o],t.test(e))return t.run(),t;this.check()===!1&&(location.hash="#reports")},r.prototype.check=function(){var e=this.getUrl(),t=!1;for(var o in this.routes){var r=this.routes[o];r.test(e)&&(t=!0)}return t===!0?r:!1},r.prototype.update=function(e){if(e=e||{},e.type&&this.setType(e.type),e.path&&this.setPath(e.path),e.pathRoot&&this.setPathRoot(e.pathRoot),e.hash&&this.setHash(e.hash),e.context&&this.setContext(e.context),e.handler&&this.setHandler(e.handler),e.routes){var t;for(t in e.routes)this.add(t,e.routes[t])}},r.prototype.hashChange=function(){window.addEventListener("hashchange",this.run.bind(this))},r.prototype.start=function(){this.update({pathRoot:"",routes:{reports:function(e){console.log("[reports]: ",e),core.events.publish("core:dom:application:show"),core.events.publish("core:dom:editor:hide")},"reports/templates":function(e){console.log("[reports/templates/]: ",e)},"reports/shared":function(e){console.log("[reports/shared/]: ",e)},"reports/my":function(e){console.log("[reports/my/]: ",e)},"reports/{id}":function(e){console.log("[reports/{id}]: ",e),core.events.publish("core:dom:application:hide"),core.events.publish("core:dom:editor:show")},bps:function(e){console.log("[bps]: ",e),core.events.publish("core:dom:application:show"),core.events.publish("core:dom:editor:hide")},"bps/{id}":function(e){console.log("[bps/{id}]: ",e),core.events.publish("core:dom:application:hide"),core.events.publish("core:dom:editor:show")},"print-forms":function(e){console.log("[print-forms]: ",e),core.events.publish("core:dom:application:show"),core.events.publish("core:dom:editor:hide")},"print-forms/{id}":function(e){console.log("[print-forms/{id}]: ",e),core.events.publish("core:dom:application:hide"),core.events.publish("core:dom:editor:show")},"web-forms":function(e){console.log("[web-forms]: ",e),core.events.publish("core:dom:application:show"),core.events.publish("core:dom:editor:hide")},"web-forms/{id}":function(e){console.log("[web-forms/{id}]: ",e),core.events.publish("core:dom:application:hide"),core.events.publish("core:dom:editor:show")}}}),this.run()},r.prototype.stop=function(){},r.prototype.destroy=function(){},r.prototype.bindEvents=function(){var e=this;document.addEventListener("DOMContentLoaded",function(){core.events.subscribe("core:router:reports:show",function(e){console.log("Router <- core:router:reports:show",e),core.events.publish("core:dom:set:title",e.name),location.hash="#reports/"+e.id}),core.events.subscribe("core:router:default",function(){console.log("Router <- core:router:default"),location.hash="#reports"}),core.events.subscribe("core:router:go",function(e){console.log("Router <- core:router:go",e),location.hash=[core.dom.application.application.getAttribute("type"),e].join("/")}),core.events.subscribe("core:router:check",function(e){console.log("Router <- core:router:check",e),location.hash="#"+e}),core.events.subscribe("core:router:start",function(){console.log("Router <- core:router:start"),core.events.publish("core:preloader:task:ready"),e.hashChange()}),core.events.subscribe("core:router:update",function(){console.log("Router <- core:router:update"),e.start()})})},e.exports=r},function(e,t){"use strict";function o(e,t,o){this.path=e,this.callback=t,this.router=o,this.values=[]}o.prototype.regex=function(){var e=this.path;return"string"==typeof e?new RegExp("^"+e.replace(/\//g,"\\/").replace(this.router.namedParam.match,this.router.namedParam.replace)+"$"):e},o.prototype.params=function(){var e,t,o={},r=this.values,s=r,n=0,i=this.path;"string"==typeof i&&(n=1,s=i.match(this.router.namedParam.match));for(t in s)e=n?s[t].replace(this.router.namedParam.match,"$1"):t,o[e]=r[t];return o},o.prototype.test=function(e){var t;return(t=e.match(this.regex()))?(this.values=t.slice(1),!0):!1},o.prototype.run=function(){return"string"==typeof this.callback?this.router.handler[this.callback](this.params()):this.callback.apply(this.router.context,[this.params()])},e.exports=o},function(e,t){"use strict";var o=function(){this.element={},this.textElement={},this.actionElement={},this.active=!1,this.actionHandler=void 0,this.message=void 0,this.actionText=void 0,this.queuedNotifications=[],this.setActionHidden(!0),this.bindEvents()};o.prototype.Constant={ANIMATION_LENGTH:500},o.prototype.cssClasses={SNACKBAR:"core-snackbar",MESSAGE:"core-snackbar__text",ACTION:"core-snackbar__action",ACTIVE:"core-snackbar--active"},o.prototype.displaySnackbar=function(){this.element.setAttribute("aria-hidden","true"),this.actionHandler&&(this.actionElement.textContent=this.actionText,this.actionElement.addEventListener("click",this.actionHandler),this.setActionHidden(!1)),this.textElement.textContent=this.message,this.element.classList.add(this.cssClasses.ACTIVE),this.element.setAttribute("aria-hidden","false"),setTimeout(this.cleanup.bind(this),this.timeout)},o.prototype.showSnackbar=function(e){return void 0===e?(console.error("Please provide a data object with at least a message to display."),!1):void 0===e.message?(console.error("Please provide a message to be displayed."),!1):e.actionHandler&&!e.actionText?(console.error("Please provide action text with the handler."),!1):void(this.active?this.queuedNotifications.push(e):(this.active=!0,this.message=e.message,e.timeout?this.timeout=e.timeout:this.timeout=2750,e.actionHandler&&(this.actionHandler=e.actionHandler),e.actionText&&(this.actionText=e.actionText),this.displaySnackbar()))},o.prototype.checkQueue=function(){this.queuedNotifications.length>0&&this.showSnackbar(this.queuedNotifications.shift())},o.prototype.cleanup=function(){this.element.classList.remove(this.cssClasses.ACTIVE),setTimeout(function(){this.element.setAttribute("aria-hidden","true"),this.textElement.textContent="",this.actionElement.getAttribute("aria-hidden")||(this.setActionHidden(!0),this.actionElement.textContent="",this.actionElement.removeEventListener("click",this.actionHandler)),this.actionHandler=void 0,this.message=void 0,this.actionText=void 0,this.active=!1,this.checkQueue()}.bind(this),this.Constant.ANIMATION_LENGTH)},o.prototype.setActionHidden=function(e){Object.keys(this.actionElement).length&&(e?this.actionElement.setAttribute("aria-hidden","true"):this.actionElement.removeAttribute("aria-hidden"))},o.prototype.start=function(){console.log("Snackbar: start");var e=document.createElement("div");e.id="core-snackbar",e.classList.add("core-snackbar");var t=document.createElement("div");t.classList.add("core-snackbar__text"),e.appendChild(t);var o=document.createElement("button");o.classList.add("core-snackbar__action"),e.appendChild(o),core.dom.snackbar=e,core.dom.root.body.appendChild(e),this.element=e,this.textElement=this.element.querySelector("."+this.cssClasses.MESSAGE),this.actionElement=this.element.querySelector("."+this.cssClasses.ACTION)},o.prototype.stop=function(){console.log("Snackbar: stop")},o.prototype.destroy=function(){console.log("Snackbar: destroy"),this.element.remove(),delete this.element},o.prototype.bindEvents=function(){var e=this;document.addEventListener("DOMContentLoaded",function(){core.events.subscribe("core:snackbar:start",function(){console.log("Snackbar <- core:snackbar:start"),core.events.publish("core:preloader:task:ready"),e.start()})})},e.exports=o},function(e,t){var o=function(e){return this.name=e.name||"",this.path=e.path||"",this.raw=e.raw||"",this};o.prototype.load=function(){return core.events.publish("core:template:load",this.name),this};var r=function(){this.templates={},this.ready=!1,this.loaded=0,this.toLoad=["reports-show","reports-index","core-progressbar","core-layout"],this.bindEvents()};r.prototype.Template=o,r.prototype.add=function(e){this.templates[e]=new this.Template({name:e}).load()},r.prototype.init=function(){for(var e=this.toLoad.length-1;e>=0;e--)this.add(this.toLoad[e]);core.events.publish("core:templates:load",this.templates)},r.prototype.bindEvents=function(){var e=this;document.addEventListener("DOMContentLoaded",function(){core.events.subscribe("core:templates:load:success",function(e){console.log("Load:",e)}),core.events.subscribe("core:templates:load:fails",function(e){throw new Error(e)}),core.events.subscribe("core:template:loaded",function(t){console.log("***",t.name,Object.keys(e.templates).length,e.toLoad.length),e.templates[t.name].raw=t.raw;var o=t.name.split("-"),r=o[0],s=o[1];console.log("templates -> bindEvents > core:template:loaded : ",r+":"+s+":template:ready"),core.events.publish(r+":"+s+":template:ready",e.templates[t.name]),e.loaded++,e.loaded===e.toLoad.length&&core.events.publish("core:preloader:ready")}),core.events.publish(""),core.events.subscribe("core:progressbar:template",function(){core.events.publish("core:template:progressbar",e.templates["core-progressbar"])}),core.events.subscribe("core:reports:template",function(){core.events.publish("core:template:reports",e.templates["reports-index"])}),core.events.subscribe("core:reports:editor:template",function(){core.events.publish("core:template:reports:editor",e.templates["reports-show"])}),core.events.subscribe("core:template:start",function(){console.log("core:template:start"),e.start()}),core.events.subscribe("core:start:all",function(){console.log("core:start:templates"),e.start()}),core.events.subscribe("core:templates:start",function(){console.log("Templates <- core:templates:start"),core.events.publish("core:preloader:task:ready")})})},r.prototype.start=function(){this.init()},r.prototype.stop=function(){},r.prototype.destroy=function(){},e.exports=r},function(e,t,o){"use strict";var r=function(){this.modules=[],this.total=this.modules.length,this.count=0,this.percent=0,this.ready=!1,this.element={},this.bindEvents()};r.prototype.start=function(){this.build()},r.prototype.stop=function(){},r.prototype.destroy=function(){this.element.remove(),delete this.element},r.prototype.update=function(e){this.element.innerHTML=e.raw,this.element.classList.add("animated"),this.element.classList.add("fadeIn")},r.prototype.build=function(e){this.element=document.createElement("div"),core.dom.application.querySelector(".core-layout-application").appendChild(this.element),core.events.publish("core:progressbar:template")},r.prototype.action=function(){for(var e=this,t=["user","router","snackbar","reports"],r=t.length-1;r>=0;r--){var s=t[r],n=new Promise(function(e,t){o(14)("./"+s+".js");setTimeout(function(){e(!0)},500*Math.random())});n.then(function(){e.updateProgress()})["catch"](function(e){throw new Error(e)}),e.modules.push(n)}e.total=e.modules.length,Promise.all(e.modules).then(function(t){e.finish()})["catch"](function(e){throw new Error(e)})},r.prototype.finish=function(){var e=this,t=new Promise(function(t,o){e.element.classList.remove("fadeIn"),e.element.classList.add("fadeOut"),setTimeout(t(!0),100)});t.then(function(){core.events.publish("core:progressbar:finish")})["catch"](function(e){throw new Error(e)})},r.prototype.updateProgress=function(){this.count++,this.percent=parseFloat(this.count/this.total),this.element.querySelector(".core-progressbar-bar").style.width=100*this.percent+"%"},r.prototype.updateRoot=function(e){this.element.innerHTML=e,this.element.classList.add("animated"),this.element.classList.add("fadeIn")},r.prototype.bindEvents=function(){var e=this;document.addEventListener("DOMContentLoaded",function(){core.events.subscribe("core:start:progressbar",function(){console.log("core:start:progressbar")}),core.events.subscribe("core:progressbar:start",function(){console.log("Progressbar <- core:progressbar:start"),core.events.publish("core:preloader:task:ready")}),core.events.subscribe("core:progressbar:build",function(t){console.log("core:progressbar:template"),e.start()}),core.events.subscribe("core:template:progressbar",function(t){console.log("core:template:progressbar",t),e.update(t),e.action()})})},e.exports=r},function(e,t,o){function r(e){return o(s(e))}function s(e){return n[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var n={"./progressbar.js":13};r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=14},function(e,t){"use strict";var o=function(e){this.current_date=new Date,this.currentYear=this.current_date.getFullYear(),this.periodStart=this.current_date,this.periodEnd=this.current_date,this.main=this.current_date.getFullYear(),this.compare=this.current_date.getFullYear()-1,this.isYearReport=e.isYearReport||!1,this.isTemplate=e.isTemplate||!1,this.isNew=e.isNew||!0},r=function(e){this.element={},this._id=e._id||"",this.name=e.name||"",this.description=e.description||"",this.author=e.author,this.providerId=e.provider_id,this.query={},this.globalQuery={},this.settings=new o(e.settings)};r.prototype.init=function(){this.detachEvents(),this.attachEvents(),this.destroyEditor(),console.log("Report -> init"),this.element=document.createElement("div"),core.dom.application.querySelector(".core-layout-application").appendChild(this.element),core.events.publish("core:reports:editor:template"),core.events.publish("core:report:load",this._id)},r.prototype.update=function(e){console.log("Report -> update"),this.element.innerHTML=e,this.element.classList.add("animated"),this.element.classList.add("fadeIn"),this.render()},r.prototype.load=function(){console.log("Report -> bindEvents")},r.prototype.detachEvents=function(){core.events.remove("core:template:reports:editor"),core.events.remove("core:report:loaded")},r.prototype.destroyEditor=function(){$("div#paper").data("froala.editor")&&$("div#paper").froalaEditor("destroy")},r.prototype.loadEditor=function(e){var t=core.utils.Base64.decode(e),o=new Promise(function(e,t){window.jQuery("div#paper").froalaEditor({toolbarButtons:["file-o","floppy-o","adjust","phone","textRotate","calculator","|","bold","italic","underline","fontSize","|","color",,"|","paragraphFormat","|","alignLeft","alignCenter","alignRight","|",,"formatUL","|","outdent","indent","|","insertImage","insertTable","|","html","|","undo","redo","|",,"customCalculationCell"],language:"ru",charCounterCount:!1,toolbarSticky:!1}),e(!0)});o.then(function(e){$("div#paper").froalaEditor("html.set",(t?t:"<p>")+"<p>")}).then(function(e){})["catch"](function(e){console.log("ERROR!",e)})},r.prototype.loadEditors=function(e){var t=core.utils.Base64.decode(e);console.log("decoded:",t)},r.prototype.attachEvents=function(){var e=this;core.events.subscribe("core:template:reports:editor",function(t){e.update(t.raw)}),core.events.subscribe("core:report:loaded",function(t){e.loadEditor(t.raw.body)})},r.prototype.render=function(){console.log("Report -> render",this);var e={_id:{text:function(e){return this._id||"-_id-"}},name:{text:function(e){return this.name||"-name-"}},description:{text:function(e){return this.description||"-description-"}},providerId:{text:function(e){return this.providerId||"-providerId-"}},query:{text:function(e){return this.query||"-query-"}},globalQuery:{text:function(e){return this.globalQuery||"-globalQuery-"}}};Transparency.render(this.element.querySelector("#report"),this,e)};var s=function(){this.element={},this.documents={},this.bindEvents()};s.prototype.Report=r,s.prototype.init=function(){core.events.publish("[ + ] core:reports:init"),this.element=document.createElement("div"),core.dom.application.querySelector(".core-layout-application").appendChild(this.element),core.events.publish("core:reports:template")},s.prototype.bindEvents=function(){var e=this;document.addEventListener("DOMContentLoaded",function(){core.events.subscribe("core:reports:loaded",function(t){for(var o in t)for(var r=t[o],s=r.length-1;s>=0;s--){var n=r[s],i={_id:n._id,name:n.name,description:n.description,update_at:n.updated_at,author:{id:n.author_id,name:n.author_id},providerId:n.provider_id,query:n.query,globalQuery:n.globalQuery,settings:{periodStart:n.periodStart,periodEnd:n.periodEnd,main:n.main,compare:n.compare,isYearReport:n.yearReport,isTemplate:n.template,providerSelected:n.providerSelected}};e.add(o,i),core.events.publish("core:card:add",{type:o,report:i})}core.events.publish("core:preloader:task:ready")}),core.events.subscribe("core:reports:start",function(e){console.log("Reports <- core:reports:start"),core.events.publish("core:preloader:task:ready")}),core.events.subscribe("core:template:reports",function(t){e.updateRootElement(t.raw)}),core.events.subscribe("core:reports:menu:select",function(e){core.events.publish("core:router:go",e.getAttribute("action"))})})},s.prototype.updateRootElement=function(e){this.element.innerHTML=e,this.element.classList.add("animated"),this.element.classList.add("fadeIn"),this.render()},s.prototype.render=function(){if(!Object.keys(this.documents).length)return!1;for(var e in this.documents){var t={type:{text:function(e){return this.type}}};t[e]={_id:{text:function(e){return this._id||"-id-";
}},name:{text:function(e){return this.name||"-name-"}},link:{href:function(e){return"#reports/"+this._id}}};var o={type:e};o[e]=this.documents[e],Transparency.render(this.element.querySelector(".report-"+e),o,t)}},s.prototype.add=function(e,t){this.documents.hasOwnProperty(e)||(this.documents[e]=[]),this.documents[e].push(new this.Report(t))},s.prototype.clear=function(e){this.documents={}},s.prototype.find=function(e){for(var t in this.documents)for(var o=this.documents[t].length-1;o>=0;o--)if(this.documents[t][o]._id===e)return this.documents[t][o]},s.prototype.show=function(e){console.log("Reports: show -> ",e);var t=this.find(e);if(!t)throw new Error("template not found!");t.init()},s.prototype.start=function(){console.log("Reports: start"),this.init()},s.prototype.stop=function(){console.log("Reports: stop")},s.prototype.destroy=function(){console.log("Reports: destroy"),this.element=[]},e.exports=s},function(e,t){e.exports=function(){document.addEventListener("DOMContentLoaded",function(){core.events.subscribe("core:dom:build:ready",function(){console.log("Core <- core:dom:build:ready"),core.events.publish("core:dom:attach:progressbar"),core.events.publish("core:preloader:start")}),core.events.subscribe("core:preloader:finish",function(){console.log("Core <- core:preloader:finish"),setTimeout(function(){core.dom.splashscreen.hide(),core.dom.splashscreen.remove(),core.dom.splashscreen={},core.events.publish("core:router:update")},750)}),core.events.subscribe("core:template:load",function(e){core.worker.postMessage(["template:load",e])}),core.events.subscribe("core:report:loaded",function(e){core.worker.postMessage(["reports:id",e])}),core.events.subscribe("core:layout:template:ready",function(e){core.events.publish("core:dom:build",e)}),core.events.subscribe("core:reports:load",function(){console.log("Core <- core:reports:load"),core.worker.postMessage(["reports:load",""])}),core.events.subscribe("core:web-forms:load",function(e){console.log("Core <- core:web-forms:load"),core.worker.postMessage(["web-forms:load",""])}),core.events.subscribe("core:web-forms:loaded",function(e){console.log("Core <- core:web-forms:loaded"),core.events.publish("core:preloader:task:ready")}),core.events.subscribe("core:print-forms:load",function(e){console.log("Core <- core:print-forms:load"),core.worker.postMessage(["print-forms:load",""])}),core.events.subscribe("core:print-forms:loaded",function(e){console.log("Core <- core:print-forms:loaded"),core.events.publish("core:preloader:task:ready")}),core.events.subscribe("core:bps:load",function(e){console.log("Core <- core:bps:load"),core.worker.postMessage(["bps:load",""])}),core.events.subscribe("core:bps:loaded",function(e){console.log("Core <- core:bps:loaded"),core.events.publish("core:preloader:task:ready")}),core.events.subscribe("core:criterias:load",function(e){console.log("Core <- core:criterias:load"),core.worker.postMessage(["criterias:load",""])}),core.events.subscribe("core:criterias:loaded",function(e){console.log("Core <- core:criterias:loaded"),core.events.publish("core:preloader:task:ready")}),core.events.subscribe("core:criteriaKeys:loaded",function(e){console.log("Core <- core:criteriaKeys:loaded"),core.events.publish("core:preloader:task:ready")}),core.events.subscribe("core:criteriaKeys:load",function(e){console.log("Core <- core:criteriaKeys:load"),core.worker.postMessage(["criteriaKeys:load",""])}),core.events.subscribe("core:custom:load",function(){var e=["layout","progressbar"];console.log("Core <- core:custom:load "),core.loadCustomElements(e),core.events.publish("core:preloader:task:ready")})},!1)}(window)}]);